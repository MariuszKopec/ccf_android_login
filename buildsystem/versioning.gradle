
ext.getVersion = { versionPropsFile ->
    def Properties versionProps = new Properties()
    versionProps.load(new FileInputStream(versionPropsFile))
    if (!System.getenv('NO_AUTO_VERSIONING') || System.getenv('NO_AUTO_VERSIONING').toInteger() == 0) {
        def code = versionProps['BUILD_NUMBER'].toInteger() + 1
        versionProps['BUILD_NUMBER'] = code.toString()
        versionProps.store(versionPropsFile.newWriter(), null)
    }
    return versionProps['MAJOR_VERSION'] +'.'+ versionProps['MINOR_VERSION'] +'.'+ versionProps['BUILD_NUMBER']
}
